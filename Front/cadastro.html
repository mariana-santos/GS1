<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="css/header_footer.css">
    <link rel="stylesheet" type="text/css" href="css/main.css">
    <link rel="stylesheet" type="text/css" href="css/historico.css">
    <link rel="stylesheet" type="text/css" href="css/login_cadastro.css">
    <title>Document</title>
</head>

<body>
    <header>
        <h1 class="logo">DEVZILLA</h1>

        <nav class="row btns_menu">

            <input type="checkbox" id="menu" />
            <div class="hamburguer">

                <button class="btn btn_menu">
                    <!-- não tem como estilizar um botao só quando ele ta pressionado ou nao no css puro, o checkbox 
                        é uma "gambiarra" que permite estilizar mostrando o menu se estiver clicado e escondendo se não tiver -->

                    <label for="menu">
                        <span></span>
                        <span></span>
                        <span></span>
                    </label>
                </button>

            </div>

            <ul>
                <li><a href="index.html">início</a></li>
                <li><a href="#">alugar</a></li>
                <li><a href="index.html#sobre">sobre</a></li>
                <li><a href="index.html#contato">contato</a></li>
                <li><a href="historico.html">minhas viagens</a></li>
            </ul>
        </nav>

        <section>
            <h3 class="bemvindo_h3">Bem vindo!</h3>
            <p>Ainda não possui conta? <a href="login.html">Entre</a> ou <a href="cadastro.html">Cadastre-se</a></p>
        </section>
    </header>

    <main class="login">
        <section class="container container_form">
            <div class="wrap_form">
                <img src="./img/background_login.svg">
                <form method="POST" onsubmit="validacaoFormulario();return false">
                    <h2>Seja bem vindo!</h2>
                    <small>Para continuar, por favor insira seus dados.</small>

                    <img src="./img/cadastro_img.svg">

                    <p style="color: red; margin-top: 2vh; font-weight: 600;" id="mensagemErro"></p>

                    <label for="nome">Nome</label>
                    <div class="wrap_input">
                        <img src="./img/icons/icon_envelope.svg">
                        <input type="text" placeholder="Arthur" id="nome">
                    </div>

                    <label for="email">Email</label>
                    <div class="wrap_input">
                        <img src="./img/icons/icon_envelope.svg">
                        <input type="email" placeholder="arthur@gmail.com" id="email">
                    </div>

                    <label for="dtNasc">Data de Nascimento</label>
                    <div class="wrap_input">
                        <img src="./img/icons/icon_calendar.svg">
                        <input type="date" placeholder="21/12/2003" id="dtNasc">
                    </div>

                    <label for="regisCNH">Registro CNH</label>
                    <div class="wrap_input">
                        <img src="./img/icons/icon_driverliscence.svg">
                        <input type="text" placeholder="0100111" id="regisCNH">
                    </div>

                    <label for="validCNH">Validade CNH</label>
                    <div class="wrap_input">
                        <img src="./img/icons/icon_calendar.svg">
                        <input type="date" placeholder="01/01/2024" id="validCNH">
                    </div>

                    <label for="uploadCNH">Upload CNH</label>
                    <div class="wrap_input">
                        <img src="./img/icons/icon_envelope.svg">
                        <input type="file" placeholder="01/01/2024" id="uploadCNH">
                    </div>
                    
                    <label for="senha">Senha</label>
                    <div class="wrap_input">
                        <img src="./img/icons/icon_lock.svg"">
                        <input type="password" placeholder="Digite sua senha" id="senha">
                    </div>
                    
                    <label for="Confirmsenha">Confirme a senha</label>
                    <div class="wrap_input">
                        <img src="./img/icons/icon_lock.svg"">
                        <input type="password" placeholder="Confirme sua senha" id="Confirmsenha">
                    </div>

                    <button type="submit" style="cursor: pointer;" class="btn btn_primary arrow">Entrar</button>

                    <a class="outros_links" href="#">Esqueceu a senha? <strong>clique aqui</strong></a>
                    <a class="outros_links" href="login.html">Já possui conta? <strong>clique aqui</strong></a>
                    
                </form>
            </div>
        </section>
    </main>


    <footer style="background-color: #5465FF;">
        <div class="row">
            <h2>Fale conosco:</h2>
            <ul class="social_media">
                <li><a href="#"><img src="img/icons/icon_fb.svg"></a></li>
                <li><a href="https://www.youtube.com/channel/UC4sgDWUic84nLQgW5AKZtiw" target="_blank"><img
                            src="img/icons/icon_yt.svg"></a></li>
                <li><a href="#"><img src="img/icons/icon_linkedin.svg"></a></li>
            </ul>
        </div>

        <p>DevZilla | Todos os direitos reservados<sup>©</sup></p>
        <a href="mailto:devzillacompany@gmail.com">devzillacompany@gmail.com</a>
    </footer>
    <script>
        document.querySelector(".bemvindo_h3").style.display = "none";
        document.querySelector("header").style.padding = "0 4em";
        document.querySelector(".logo").style.margin = "0";

        nome = document.getElementById("nome")
        email = document.getElementById("email")
        dtNasc = document.getElementById("dtNasc")
        regisCNH = document.getElementById("regisCNH")
        validCNH = document.getElementById("validCNH")
        uploadCNH = document.getElementById("uploadCNH")
        senha = document.getElementById("senha")
        Confirmsenha = document.getElementById("Confirmsenha")

        mensagemErro = document.getElementById("mensagemErro")
        
        function validacaoFormulario () {

            if (nome.value.length == 0){
                mensagemErro.innerHTML = "Campo nome é obrigatório."
                nome.focus()
            } else if (email.value.length == 0){
                mensagemErro.innerHTML = "Campo e-mail é obrigatório."
                email.focus()
            } else if (dtNasc.value.length == 0){
                mensagemErro.innerHTML = "Campo data de nascimento é obrigatório."
                dtNasc.focus()
            } else if (!validarIdade(dtNasc)){
                dtNasc.focus()
                mensagemErro.innerHTML = "Você precisa ter no mínimo 18 anos."
            }
            else if (regisCNH.value.length == 0){
                 mensagemErro.innerHTML = "Campo registro CNH é obrigatório."
                 regisCNH.focus()
                } else if (validCNH.value.length == 0){
                mensagemErro.innerHTML = "Campo validade CNH é obrigatório."
                validCNH.focus()
            } else if (!validarCNH(validCNH)){
                validarCNH.focus()
                mensagemErro.innerHTML = "A CNH está vencida, não é possível se cadastrar."
            } else if (uploadCNH.value.length == 0){
                mensagemErro.innerHTML = "Campo upload CNH é obrigatório."
                uploadCNH.focus()
            } else if (senha.value.length == 0){
                mensagemErro.innerHTML = "Campo senha é obrigatório."
                senha.focus()
            } else if (!validarSenha(senha)){
                mensagemErro.innerHTML = "A senha precisa conter: 1 número, 1 letra maiúcula, 1 letra minúscula, 1 caractere especial e no mínimo 8 dígitos."
                senha.focus()
            } else if (Confirmsenha.value.length == 0){
                mensagemErro.innerHTML = "Campo confirmar senha é obrigatório."
                Confirmsenha.focus()
            } else if (senha.value != Confirmsenha.value){
                mensagemErro.innerHTML = "As senha precisam ser iguais."
                Confirmsenha.focus()
            } else{
                alert("Usuário cadastrado com sucesso!")
            }
        }

        function validarIdade (data) {
            data = data.value.replace(/\//g, "-"); // substitui eventuais barras (ex. IE) "/" por hífen "-"
            var data_array = data.split("-"); // quebra a data em array
            
            // para o IE onde será inserido no formato dd/MM/yyyy
            if(data_array[0].length != 4){
                data = data_array[2]+"-"+data_array[1]+"-"+data_array[0]; // remonto a data no formato yyyy/MM/dd
            }
            
            // comparo as datas e calculo a idade
            var hoje = new Date();
            var nasc  = new Date(data);
            var idade = hoje.getFullYear() - nasc.getFullYear();
            var m = hoje.getMonth() - nasc.getMonth();
            if (m < 0 || (m === 0 && hoje.getDate() < nasc.getDate())) idade--;
            
            if(idade < 18 || idade > 150){
                return false;
            }else {
                return true;
            }
        }

        function validarCNH (data) {
            data = data.value.replace(/\//g, "-"); // substitui eventuais barras (ex. IE) "/" por hífen "-"
            var data_array = data.split("-"); // quebra a data em array
            
            // para o IE onde será inserido no formato dd/MM/yyyy
            if(data_array[0].length != 4){
                data = data_array[2]+"-"+data_array[1]+"-"+data_array[0]; // remonto a data no formato yyyy/MM/dd
            }

            var hoje = new Date() 
            var val  = new Date(data);
            val.setDate(val.getDate() + 1);

            if (val <= hoje){
                return false;
            } else {
                return true;
            }
        }

        function validarSenha ( senhaDigitada ) {
            var letrasMaiusculas = /[A-Z]/;
            var letrasMinusculas = /[a-z]/; 
            var numeros = /[0-9]/;
            var caracteresEspeciais = /[!|@|#|$|%|^|&|*|(|)|-|_]/;

            if (!letrasMaiusculas.test(senhaDigitada.value) || !letrasMinusculas.test(senhaDigitada.value) || !numeros.test(senhaDigitada.value) || !caracteresEspeciais.test(senhaDigitada.value || senhaDigitada.value.length < 8)){
                return false;
            } else {
                return true;
            }
        }
    </script>
</body>

</html>